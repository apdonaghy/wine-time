{"remainingRequest":"/Users/drew/Desktop/projects/wineTime/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drew/Desktop/projects/wineTime/src/App.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/drew/Desktop/projects/wineTime/src/App.vue","mtime":1618464731698},{"path":"/Users/drew/Desktop/projects/wineTime/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drew/Desktop/projects/wineTime/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/drew/Desktop/projects/wineTime/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/drew/Desktop/projects/wineTime/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drew/Desktop/projects/wineTime/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8qIEdsb2JhbCBTdHlsZXMgKi8KCkBpbXBvcnQgdXJsKCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUFiaGF5YStMaWJyZTp3Z2h0QDQwMDs1MDA7NjAwOzcwMDs4MDAmZGlzcGxheT1zd2FwIik7CkBpbXBvcnQgdXJsKCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVdvcmsrU2Fuczp3Z2h0QDMwMDs0MDA7NjAwJmRpc3BsYXk9c3dhcCIpOwoKQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICJuYXJyb3ciOwogIHNyYzogdXJsKC4uL3B1YmxpYy9mb250cy9kaW5fTGlnaHRBbHRlcm5hdGUudHRmKTsKfQoKQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICJuYXJyb3dNZWRpdW0iOwogIHNyYzogdXJsKC4uL3B1YmxpYy9mb250cy9kaW5fTWVkaXVtLnR0Zik7Cn0KCjpyb290IHsKICAtLW5hcnJvdzogIm5hcnJvdyI7CiAgLS1uYXJyb3dNZWRpdW06ICJuYXJyb3dNZWRpdW0iOwogIC0tYnJhbmQ6ICM3ZjEyZmY7CiAgLS1zZXJpZjonQWJoYXlhIExpYnJlJzsKICAtLXNhbnNTZXJpZjogJ1dvcmsgU2Fucyc7Cn0KCgouc2VwYXJhdGUgewogIGZvbnQtc2l6ZTogMS40ZW07CiAgbWFyZ2luOiAwIDVweCAwIDVweDsKfQoKLmNvbnRhaW5lciB7CiAgbWF4LXdpZHRoOiAxNDYwcHg7CiAgbWFyZ2luOiAwIGF1dG87Cn0KCmJvZHl7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNzsKfQoKOjpzZWxlY3Rpb24gewogIGJhY2tncm91bmQ6IGJsYWNrOwogIGNvbG9yOiB3aGl0ZTsKfQoKLm5hdlN0eWxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICBib3gtc2hhZG93OiAwcHggMHB4IDVweCAjZWJlYmViOwogIHBvc2l0aW9uOiBmaXhlZDsKICB6LWluZGV4OiAzOwogIHdpZHRoOiAxMDAlOwp9CgoqIHsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAwOwp9CgoubG9nbyB7CiAgd2lkdGg6IDMwMHB4Owp9CgouZ3JleSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YzZjNmMzsKICBoZWlnaHQ6IDU5cHg7Cn0KCi5mbGV4LWNvbnRhaW5lck5hdiB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LXdyYXA6IG5vd3JhcDsKICAvKiBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgKi8KICBhbGlnbi1pdGVtczogY2VudGVyOwogIHdpZHRoOjkwJTsKICBtYXJnaW46IDAgYXV0bzsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgcGFkZGluZzogN3B4IDBweCAycHggMHB4Owp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5MDBweCkgewogIC5mbGV4LWNvbnRhaW5lck5hdiB7CiAgICBhbGlnbi1pdGVtczogdW5zZXQ7CiAgfQp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA1MDBweCkgewogIC5sb2dvIHsKICAgIHBhZGRpbmctdG9wOiA2cHg7CiAgICB3aWR0aDogMjAwcHg7CiAgfQp9CgouYWJvdXQgYSB7CiAgZm9udC1mYW1pbHk6ICJBYmhheWEgTGlicmUiLCBzZXJpZjsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgZm9udC1zaXplOiAxLjVlbTsKICBjb2xvcjogdmFyKC0tYnJhbmQpOwp9CgouYWJvdXQgYTpob3ZlciB7CiAgY29sb3I6IGJsYWNrOwp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"navStyle\">\n      <!-- Global nav -->\n      <nav class=\"flex-containerNav\">\n        <h1 class=\"ninety\">\n          <!-- <router-link to=\"/\"> points to Home.vue  -->\n          <router-link to=\"/\">\n            <img class=\"logo\" src=\"./assets/wineTime.svg\" />\n          </router-link>\n        </h1>\n        <!-- <router-link to=\"/About\"> points to About.vue -->\n        <Menu v-show=\"mobile\"></Menu>\n        <div v-show=\"desktop\" class=\"ten about\">\n          <router-link to=\"/Saved\">Wine Collection</router-link>\n          <span class=\"separate\">|</span>\n          <router-link to=\"/About\">About</router-link>\n        </div>\n      </nav>\n      <!-- Global nav -->\n    </div>\n    <!-- The router's current view will be injected into the application here with <router-view />  -->\n    <router-view\n      :results=\"results\"\n      :favorites=\"favorites\"\n      :spin=\"spin\"\n      :errors=\"errors\"\n      @apiCall=\"apiCall\"\n      @saveWine=\"saveWine\"\n      @removeWine=\"removeWine\"\n    />\n  </div>\n</template>\n\n<script>\nimport Menu from \"./components/Menu.vue\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"App\",\n  components: {\n    Menu,\n  },\n  data() {\n    return {\n      mobile: false,\n      desktop: false,\n      windowWidth: 0,\n      results: null,\n      spin: false,\n      errors: [],\n      favorites: [],\n      inFaves: false\n    };\n  },\n  created() {\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.resize);\n  },\n  mounted() {\n    if (this.$ls.get(\"savedWines\")) {\n      this.favorites = this.$ls.get(\"savedWines\");\n    }\n    this.apiCall({wine: 'Merlot'})\n  },\n  methods: {\n    resize() {\n      this.windowWidth = window.innerWidth;\n      if (this.windowWidth >= 900) {\n        this.desktop = true;\n        this.mobile = false;\n      } else {\n        this.desktop = false;\n        this.mobile = true;\n      }\n    },\n    apiCall(payload) {\n\n    this.results = null;\n\n    let cacheLabel = 'wines_' + payload.wine;\n    let cacheExpiry = 30 * 60 * 1000; // 15 minutes\n\n    if (this.$ls.get(cacheLabel)){\n    console.log('Cached query detected.');\n    this.results = this.$ls.get(cacheLabel);\n    this.spin = false;\n    } else {\n    console.log('No cache available. Making API request.');\n      axios\n        .get(\"https://api.spoonacular.com/food/wine/recommendation\", {\n          params: {\n            wine: payload.wine, //dynamically adds the user's choice to the API request\n            number: 100,\n            minRating: 0.8,\n            apiKey: \"2c010ee91b164e24a2c25a653e110615\", //apply for a unique API key at spoonacular.com\n          },\n        })\n        .then((response) => {\n          //API response\n      \n           console.log('New query has been cached as: ' + cacheLabel);\n          this.results = this.processData(response.data.recommendedWines);\n          this.$ls.set(cacheLabel, this.results, cacheExpiry);\n          this.spin = false;\n        })\n        .catch((error) => {\n          (this.spin = false), this.errors.push(error);\n        });\n        this.spin = true;\n\n    }\n    },\n    processData: function (dataArr) {\n      for (let data in dataArr) {\n        dataArr[data].price = parseFloat(dataArr[data].price.substring(1));\n      }\n      return dataArr;\n    },\n    saveWine: function (item) {\n      \n      for(let newItem of this.favorites){\n          if(item.id === newItem.id){\n            this.inFaves = true\n          }\n      }\n\n      if(this.inFaves === false){\n        this.favorites.push(item);\n      }\n\n      this.$ls.set(\"savedWines\", this.favorites);\n      this.inFaves = false;\n    },\n    removeWine: function(wine) {\n      let wineIndex = this.favorites.indexOf(wine);\n      this.favorites.splice(wineIndex, 1);\n      this.$ls.set(\"savedWines\", this.favorites); \n    }\n  },\n};\n</script>\n\n\n<style>\n/* Global Styles */\n\n@import url(\"https://fonts.googleapis.com/css2?family=Abhaya+Libre:wght@400;500;600;700;800&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;600&display=swap\");\n\n@font-face {\n  font-family: \"narrow\";\n  src: url(../public/fonts/din_LightAlternate.ttf);\n}\n\n@font-face {\n  font-family: \"narrowMedium\";\n  src: url(../public/fonts/din_Medium.ttf);\n}\n\n:root {\n  --narrow: \"narrow\";\n  --narrowMedium: \"narrowMedium\";\n  --brand: #7f12ff;\n  --serif:'Abhaya Libre';\n  --sansSerif: 'Work Sans';\n}\n\n\n.separate {\n  font-size: 1.4em;\n  margin: 0 5px 0 5px;\n}\n\n.container {\n  max-width: 1460px;\n  margin: 0 auto;\n}\n\nbody{\n  background-color: #f7f7f7;\n}\n\n::selection {\n  background: black;\n  color: white;\n}\n\n.navStyle {\n  background-color: white;\n  box-shadow: 0px 0px 5px #ebebeb;\n  position: fixed;\n  z-index: 3;\n  width: 100%;\n}\n\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n.logo {\n  width: 300px;\n}\n\n.grey {\n  background-color: #f3f3f3;\n  height: 59px;\n}\n\n.flex-containerNav {\n  display: flex;\n  flex-wrap: nowrap;\n  /* justify-content: center; */\n  align-items: center;\n  width:90%;\n  margin: 0 auto;\n  justify-content: space-between;\n  padding: 7px 0px 2px 0px;\n}\n\n@media screen and (max-width: 900px) {\n  .flex-containerNav {\n    align-items: unset;\n  }\n}\n\n@media screen and (max-width: 500px) {\n  .logo {\n    padding-top: 6px;\n    width: 200px;\n  }\n}\n\n.about a {\n  font-family: \"Abhaya Libre\", serif;\n  text-decoration: none;\n  font-size: 1.5em;\n  color: var(--brand);\n}\n\n.about a:hover {\n  color: black;\n}\n</style>"]}]}